---
title: "인수 테스트 - 2"
description: "인수 테스트가 어떻게 만들어지는 지 각 과정을 설명합니다."
category: "ATDD"
cover: images/thumbnail/ATDD.png
coverAlt: "about ATDD"
datePublished: "2023-05-08"
dateModified: "2023-05-08"
tags:
  - ATDD
---
# 인수 테스트 - 2

```
어디로 가야 할지 모른다면, 결국 엉뚱한 곳에 가 있을 것이다.
```

프로젝트는 일반적으로 **기획 → 기능 도출 → 스토리 작성 → 시나리오 작성 → 테스트 작성 → 개발**의 흐름으로 진행됩니다. 이번 시간에는 각 프로세스가 진행되는 일련의 과정을 따라가며 최종적으로 인수 테스트가 어떻게 작성되는 지 알아가는 시간이 되었으면 좋겠습니다.

## 기획

기획은 대표적으로 **비전**, **미션**, **원칙**, **목표**로 구성됩니다.

- 비전: 왜 이 프로젝트가 끝나야 하는지 최종적인 상태를 기술합니다.
- 미션: 비전에 도달하기 위해 필요한 경로를 기술합니다.
- 목표: 외부에서 볼 때 프로젝트의 성공을 측정할 수 있는 기준을 설정합니다.
- 원칙: 팀이 의사 결정을 할 때 사용할 수 있는 가치 있는 문장입니다.

```
비전: 클래스팅 활동 데이터를 기반으로 혁신적인 기술을 통해 부모가 자녀를 더 잘 양육할 수 있는 정보와 구독 서비스를 제공한다.
미션: 클래스팅의 자녀 활동 데이터를 기반으로 한 정기 구독 상품을 개발한다.
목표:
  1. MMR N%를 달성한다.
  2. 구독 잔존율 N%를 달성한다.
  3. Avg. Paid Customer Life Span을 N만큼 도달한다.
원칙: 제품을 가이드 없이 이해할 수 있어야 한다.
```

기획을 정할때는 모든 이해 관계자들이 기획 회의에 참여하여 프로젝트에 대한 큰 그림의 아이디어를 얻고 관련 이슈를 이해하면서, 프로젝트의 목표가 가능함에 동의할 수 있어야 합니다.

### 목표 설정

목표는 **프로젝트 전체에 대한 인수 테스트**이고, SMART해야합니다.

- 구체적인(Specific): 정확히 어떤 것이 구현되야 하는지, 어떤 산출물이 나와야 하는 지 알 수 있어야 합니다.
- 측정 가능한(Measurable): 결과를 측정할 수 있어야 합니다.
- 성취할 수 있는(Achievable): 결과를 합리적으로 성취할 수 있어야 합니다.
- 적절한(Relevant): 결과가 비전과 관련 있어야 합니다.
- 시간 내(Time boxed): 목표를 이루는 데 얼마나 걸리는 지 알 수 있어야 합니다.

## 기능 추출

기획 후에는 목표를 달성하기 위해 고 수준의 요구사항을 도출해야 합니다. 기획과 관련된 기능을 도출하면 고객 집단은 어떤 기능들이 목표를 이루는 데 도움이 되는지를 결정할 필요가 있고, 프로젝트 범위에 어떤 부분을 넣을 지 결정합니다.

예를 들어 아래와 같은 고수준의 요구사항을 가진 기능들을 추출할 수 있습니다.

- 부모가 자녀의 클래스 할일을 쉽게 파악하기 위한 할 일 기능
- 부모가 자녀에게 좋은 습관을 형성할 수 있게 도와주는 스탬프 기능
- 부모가 자녀의 활동을 일일히 찾아보지 않고 자녀의 활동을 모아서 보여주는 클래스 활동 내역 기능
- 부모가 손쉽게 자녀의 성장을 트래킹할 수 있도록 하는 활동 분석 리포트 기능
- 사용자에게 인사이트를 미리 체험시켜 구독 전환율을 올리는 비 구독자 홈 기능

**고수준의 요구사항 도출 시 주의 점**

- 고수준의 요구사항은 기획에서 설정한 목표를 지원해야 합니다.
- 고수준의 요구사항은 고수준의 인수 기준을 가져야 합니다.

위와 같이 기능이 추출되고, 목표를 이루기 위한 기능에 대한 동의가 이루어 졌으면 주어진 시간 내에 해당 기능이 구현 가능한 지를 대략적으로 예측한 뒤 이후 기능에 대한 일련의 계획과 일정을 수립합니다.

![Product plan](/images/about-atdd/product_plan.png)

## 스토리 작성

전체 기능을 위해 특정 인수 테스트를 고안하는 것 보다, 작게 나눈 기능에 대해 테스트를 고안하는 편이 더 쉽습니다.

예를 들어 자녀의 할일을 쉽게 파악 하기 위한 할 일 기능에 대한 테스트를 작성한다고 가정해 봅시다.

**전체 기능을 위해 특정 인수 테스트를 고안하는 경우**

- 할 일
    
    할일이 추가되면, 할일 목록에 할 일이 노출되고 자녀가 할일을 완료하면 할일이 완료 처리된다.
    

**작게 나눈 기능에 대한 테스트**

- 공지 할일
    
    선생님이 공지를 작성하면 할일에 추가되고, 당일에 작성한 공지 글만 할일 목록에 노출된다.
    
    자녀가 선생님이 작성한 공지를 읽으면 할일이 완료 처리된다.
    
- 과제 할일
    
    선생님이 과제를 작성하면 할일에 추가되고, 과제의 마감일이 오늘 혹은 내일인 경우 할일 목록에 노출된다.
    
    자녀가 선생님이 작성한 과제를 제출하면 할일이 완료 처리된다.
    
- 알림
    
    자녀가 할일을 완료하면, 완료한 할일에 대한 알림을 받을 수 있다.
    

위와 같이 전체 기능을 위해 특정 인수 테스트를 고안하는 것 보다 기능을 작게 나누어 테스트를 작성하는 것이 사용자의 자세한 요구사항까지 고려하여 테스트를 쉽게 작성할 수 있습니다.
요구사항 스토리는 기능의 작은 부분이고, 대 부분의 요구사항 스토리를 **사용자 스토리**라고 부르는데 이는 시스템에 대해 사용자가 원하는 내용이 요구사항 스토리에 있기 때문입니다.

### 스토리 형식

기능을 아래와 같은 형식을 가진 스토리로 분할 할 수 있습니다.

```
<역할>을 가진 사람으로, <이유>하기 위해, 나는 <행동>을 하고자 한다.
```

할 일에 대한 스토리를 작성하게 되면 아래와 같이 작성할 수 있습니다.

- 나는 부모로써, 자녀의 할 일을 한눈에 확인하기 위해, 자녀의 오늘 할 일을 확인할 수 있다.
- 나는 자녀로써, 스스로 해야할 일을 확인하고 실행하기 위해, 내가 오늘 해야 하는 일을 확인할 수 있다.
- 나는 부모로써, 자녀의 할 일 진행상황을 편하게 체크하기 위해, 자녀가 완료한 할일을 확인할 수 있다.
- 나는 부모로써, 자녀의 할일을 편하게 확인하기 위해, 자녀가 오늘 확인해야 할 공지를 읽으면 알림을 받을 수 있다.
- 나는 부모로써, 자녀의 할일을 편하게 확인하기 위해, 자녀가 오늘/내일 마감인 과제를 제출하면 알림을 받을 수 있다.

**역할**은 사용자를 대변하고, **행동**은 사용자가 이루고자 하는 일입니다. **이유**는 왜 사용자가 그 행동을 하는 지 하는 것입니다. **역할**과 **행동**은 중요한 부분이지만, **이유**는 반드시 유저 스토리 작성 시 필요한 부분은 아닙니다.

**역할**은 특정한 사람일 필요는 없지만 기능을 사용하는 절차에서 사람들이 쓰고 있는 **모자**이고 이를 밝혀내는 것이 중요합니다. 그 이유는 사용자 스토리의 상세 사항을 수집할 때, 누가 어떤 역할을 할 것인지 확실히 하여, 사용성 테스트나 탐험적 테스트를 할 때, 역할에 따라 시스템의 기능을 살펴볼 수 있기 때문입니다.

각 역할들이 한 사람에 의해 수행 되더라도 각자 다른 관점과 책임을 가지고 있어서 역할을 구분합니다. 또한 역할의 속성을 다루는 것이 유용할 수 있는데, 이를 활용하여 시스템을 어떻게 설계할지? 사용성을 어떻게 테스트할 수 있을지에 대한 좋은 아이디어를 제공할 수 있기 때문입니다.

**역할 속성**

```
이름: 김혜정
나이: 39
자녀 1명(초4)
맞벌이 부부로 자녀를 케어할 시간이 부족함
자녀 교육에 대한 관심은 있어서 학교 생황에서 부모가 필요한 부분은 모두 지원하고 싶어함
PC보다는 스마트폰의 사용이 익숙함
앱을 자주 접속하게 소식을 확인하는 편은 아님
```

역할의 속성을 이용하여 페르소나를 생성할 수 있는데, 이는 딱딱하게 정의된 역할 속성을 읽는 것 보다 실제 사용자에 가까운 인물을 상상하는 것이 역할의 속성을 이용하는데 도움을 줄 수 있습니다.

![Persona](/images/about-atdd/persona.png)

위와 같은 페르소나를 통해 할일이 자동으로 생성되거나, 자녀가 할일을 완료하면 학부모에게 푸쉬 메시지와 같은 기능을 이용하여 자녀가 할일을 했는 지 간편하게 확인 할 수 있도록 시스템을 설계하고, PC보다는 모바일 친화적으로 어떻게 인터페이스를 구성해야할 지 도움을 주며 계속 상기시킬 수 있습니다.

**스토리 작성 시 주의 사항**

고객의 언어를 사용하여 일관된 용어로 스토리를 작성해야합니다. 고객 언어의 일관된 사용을 하지 않으면 이후에 매우 헛갈릴 소지가 있기 때문입니다.

### 스토리 인수 기준

스토리가 작성되면 이에 대한 인수 기준을 만들어야 합니다. 스토리는 작을 수록 개발과 테스트가 쉬워지기 때문에 인수 테스트가 크다고 느껴지면, 스토리를 작게 나눌 수 있어야 합니다. 스토리를 나눌 때 마다 고객/개발자/테스터가 참여하는 것이 좋은데, 그 이유는 스토리를 나눌 때 관련한 여러 질문들이 생길 것이고, 그 질문에 답하는 것으로써 각 부분에 대해 더 잘 이해할 수 있게 될 것이기 때문입니다.

`나는 부모로써, 자녀의 할 일을 한눈에 확인하기 위해, 자녀의 오늘 할 일을 확인할 수 있다.`에 대한 **인수 기준**을 아래와 같이 작성할 수 있습니다.

- 클래스에 오늘 작성된 공지가 있으면 오늘 할 일에서 해당 공지를 확인할 수 있다.
    - 공지의 제목을 확인할 수 있다.
    - 할 일 유형(공지)를 확인할 수 있다.
- 클래스에서 배부된 과제가 오늘/내일 마감이면 할 일에서 과제를 확인할 수 있다.
    - 과제의 제목을 확인할 수 있다.
    - 할 일 유형(과제)를 확인할 수 있다.
    - 마감일을 확인할 수 있다.
- 할 일을 클릭하면 해당 원본 게시글로 이동되어야 한다.
- 마감일이 지난 할 일은 오늘 할 일에서 확인할 수 없어야 한다.
    - 공지의 할 일 마감일은 작성일이다.
    - 과제의 할 일 마감일은 과제 제출 마감일이다.
- 마감일이 지나지 않은 공지/과제가 수정되면 할 일에서 수정된 공지를 확인할 수 있다.
- 마감일이 지나지 않은 공지/과제가 삭제되면, 할 일에서 공지/과제를 확인할 수 없다.

**인수 기준에 따라 스토리 크기를 결정하는 방법**

인수 테스트가 스토리의 크기를 결정합니다. 위에서 언급한 것 처럼 스토리를 상세화 할 때 크기가 너무 크다고 느끼면 스토리를 작은 단위로 나눌 수 있어야 합니다.
위 예시로 작성한 스토리 중 **할일 완료 스토리**와 **할일 완료 알림 스토리**도 하나의 스토리로 작성할 수 있지만, 스토리를 상세화 하면서 인수 테스트가 크다고 판단하여 스토리를 나누었습니다.

### 요구 사항 스토리에 대한 기준

스토리는 **독립적**이고 **협상 가능**하며, **가치 있고**, **평가 가능**하고, **작으며** **테스트 가능한** 기준과 비교되어야 한다는 기준(INVEST)을 갖습니다.

- 독립적(Independent): 각 스토리가 다른 스토리에 대한 종속성이 없이 그 자체로 완전해야 합니다.
- 협상 가능(Negotiable): 스토리가 정확히 무엇인지 판단하기 어렵고 쉽게 결정을 내리지 못할 수도 있다는 것을 의미합니다. 따라서 작업자(고객/개발자/테스터)는 작업을 시작할 때 서로 협력 해야 합니다.
- 가치 있음(Valuable): 스토리는 업무 가치를 부여할 수 있어야 합니다. 스토리가 업무 가치를 반영하지 못한다면 이는 아무 의미가 없습니다. 어떠한 개발자 스토리든지 업무 가치를 가진 스토리와 반드시 연관되어야 합니다.
- 평가 가능(Estimable): 개발자와 테스터가 스토리의 완료까지 얼마나 걸리는지 대충 평가할 수 있음을 의미 합니다.
- 작음(Small): 작은 스토리들은 단일 반복 주기나 적당한 주기 시간 내에 완료될 수 있습니다. 스토리가 단일 반복 주기에서 완료되지 못한다면, 진행 상황을 추적하기가 매우 어려워지며 쉽게 이해하기 어려운 스토리가 될 가능성이 높습니다. 큰 스토리(Epic)는 이해할 수 있는 작은 스토리로 나눌 수 있어야 합니다.
- 테스트 가능(Testable): 스토리가 완료되었다는 것을 사용자가 확인시켜 준다는 뜻입니다. 인수 테스트를 갖는 것은 스토리를 테스트 가능하게 하며, 이러한 테스틀 통과하면 시스템이 고객의 요구를 만족한다는 의미입니다. 인수 테스트가 있다는 것은 자동화 할 수 있다는 의미이고, 이는 새로운 스토리가 구현되었을 때 이전 스토리가 깨지지 않음을 쉽게 확인할 수 있다는 의미입니다.

## 시나리오 작성

유스케이스를 사용하여 시나리오를 작성하는데, 유스케이스는 **사용자와 소프트웨어 간에 발생하는 일련의 행동과 반응을 기록한 것**을 말합니다. 유스케이스는 소프트웨어 시스템 외부에서 발생하는 일련의 행동이 되기도 하고, 또는 다른 유스케이스 작업 흐름의 일부가 될 수도 있습니다.

### 유스케이스 생성

유스케이스는 선처리 조건, 후 처리 조건, 주 경로로 이루어진 템플릿을 사용합니다.

```
유스케이스 템플릿
이름: 쉽게 참조할 수 있어야 함
설명: 간단한 노트
액터(Actor): 유스케이스를 시작하는 사람 <- 사용자 스토리에서 사용자와 같은 역할
선처리 조건(Pre-condition): 유스케이스가 시작되기 전에 반드시 수행되야 할 일
후처리 조건(Post-condition): 유스케이스가 성공적으로 수행되고 반드시 수행되어야 할 일
주 경로(Main course): 일련의 상호작용을 보여주는 과정
```

위 템플릿을 이용하여 아래와 같이 할일 확인에 대한 유스케이스를 작성할 수 있습니다.

```
사용자 스토리: 나는 부모로서, 자녀의 할 일을 한눈에 확인하기 위해, 홈에서 자녀의 할 일을 확인할 수 있다.

  시나리오: 자녀가 참여한 클래스에서 선생님이 공지를 작성하면, 할 일에서 공지를 확인 할 수 있어야 한다.
  유스케이스
  이름: 자녀가 참여한 클래스에서 오늘 작성된 공지를 할일에서 확인 할 수 있다.
  설명: 학부모가 자녀가 오늘 작성된 공지를 할일에서 확인할 수 있다.
  액터: 학부모
  선처리 조건: 자녀가 참여한 클래스에 오늘 작성된 공지가 있음
  후처리 조건: 오늘 작성된 공지를 할일에서 확인할 수 있어야 한다.
  주 경로:
    1. 선생님이 클래스에 공지를 작성함
    2. 학부모가 인사이트 홈에 진입함
    3. 할일에서 오늘 작성된 공지를 확인할 수 있다.

  시나리오: 자녀가 참여한 클래스에서 배부된 과제가 오늘/내일 마감이면, 할일에서 과제를 확인할 수 있다.
  유스케이스
  이름: 자녀가 참여한 클래스에서 배부된 과제가 오늘/내일 마감인 과제를 할일에서 확인할 수 있다.
  설명: 학부모가 클래스에서 배부된 과제가 오늘/내일 마감인 과제를 할일에서 확인할 수 있다.
  액터: 학부모
  선처리 조건: 자녀가 참여한 클래스에 배부된 과제가 오늘/내일 마감임
  후처리 조건: 할일에서 오늘/내일인 과제를 확인할 수 있어야 한다.
  주 경로:
    1. 선생님이 마감일이 오늘/내일인 과제를 배부함
    2. 학부모가 인사이트 홈에 진입하면
    3. 할일에서 마감일이 오늘/내일인 과제를 확인할 수 있다.
```

유스 케이스는 사용자 스토리의 시나리오를 설명할 수 있어야 하며, 일반적으로 유스케이스를 작성하려면 업무 흐름이 어떻게 흘러가는지에 대해서 모두의 공감대가 형성되어 있어야 합니다.

### 예외와 대안

주 경로를 식별한 후에, 유스케이스의 부가적인 정보들을 찾아 처리할 수  있습니다. 유스케이스를 적는 동안 후처리 조건에 도달 할 수 없는 조건이 생겨날 수 있는데 이런 상황을 **예외**라고 합니다. 예외는 예외 시나리오라고 하는 다른 시나리오는 가질 수 있습니다.

```
예외
1a. 선생님이 클래스에 공지글을 23시 59분 59초에 작성했고, 할일 목록에 등록되지 않았다.
    00시 05분까지 작성한 공지 글은 할일 목록에서 확인할 수 있도록 한다.
    유스 케이스를 종료한다.
1b. 등록할 수 있는 할일 갯수 이상의 할일이 등록됨
    더 이상 할을 등록할 수 없다는 사실을 학부모에게 알려준다.
    유스케이스를 종료한다.
```

유스케이스의 다른 한 가지 종류는 다른 시나리오를 이야기 하는 **대안**입니다. 대안은 다른 조건에 의해 유스케이스가 성공적으로 끝나는 흐름을 이야기합니다.

```
대안
1a. 자녀가 학부모 계정으로 공지를 확인함
    학부모가 직접 할일을 완료 처리한다.
    유스케이스를 종료한다.
```

## 테스트 생성

고객은 보통 기본적인 작업흐름에 대한 테스트를 생성하며, 개발자와 테스터들은 자신의 경험을 바탕으로 테스트를 생성합니다. 테스터는 실무에서 사용할 수 있을 만큼 완벽하게 테스트를 생성했는지 확인해야 하는 책임이 있습니다.
원론적으로 개발자가 스토리를 구현하기 전에 고객/개발자/테스터 모두가 테스트를 도출 해야하지만, 때때로 구현 단계나 이후에 새로운 테스트를 발견할 수도 있고, 탐험적 테스팅 동안에는 팀은 놓친 조건이나 다른 문제를 발견하여 새로운 테스트를 만들어야 할 수 도 있습니다. 하지만, **구현 이후에 테스트를 빈번히 생성해야 한다면 반드시 원인이 무엇인지 조사해야 합니다.**

### 테스트의 구조

테스트는 기본적으로 [Gherkin](https://cucumber.io/docs/gherkin/reference/)을 따릅니다. 테스트는 시스템의 상태를 설정하면서(Given), 테스트를 시작하며 트리거(When)을 발생시키고, 이벤트에 대해 예상되는 출력(Then)을 갖습니다. 테스트는 이러한 예상 출력과 테스트 결과로 나타나는 시스템의 실제 출력을 비교하여, 두 출력이 같다면 성공, 그렇지 않다면 실패하게 됩니다.

```
Given <설정>
When <이벤트나 동작>
Then <예상되는 결과>
```

자녀 할일 확인에 대한 인수 테스트를 아래와 같이 작성할 수 있습니다.

```gherkin
Feature: 오늘 할 일 확인

Scenario: 자녀가 참여한 클래스에서 공지를 작성되면, 할 일에서 공지를 확인할 수 있어야 한다.
	Given 자녀가 가입한 클래스에 오늘 작성된 공지가 있음
	When 인사이트 홈에 진입하면
	Then 오늘 할 일 영역에서 공지 제목을 확인할 수 있다.
	And 해당 할 일의 유형이 공지임을 확인할 수 있다.

Scenario: 자녀가 참여한 클래스에서 배부된 과제가 오늘/내일 마감이면, 할 일에서 과제를 확인할 수 있어야 한다.
	Given 자녀가 가입한 클래스에 오늘/내일 마감인 과제가 있음
	When 인사이트 홈에 진입하면
	Then 오늘 할 일 영역에서 과제 제목을 확인할 수 있다.
	And 해당 할 일의 유형이 과제임을 확인할 수 있다.
	And 해당 할 일의 마감이 언제까지인지 확인할 수 있다.

Scenario: 마감일이 지난 할 일은 오늘 할 일에서 확인할 수 없어야 한다.
	Given 마감일이 지난 할 일이 있음
	When 인사이트 홈에 진입하면
	Then 오늘 할 일에서 마감일이 지난 할 일을 확인할 수 없어야 한다.

Scenario: 마감일이 지나지 않은 공지가 수정되면, 할 일에서 수정된 공지를 확인할 수 있다.
	Given 마감일이 지나지 않은 공지가 있음
	And 자녀가 가입한 클래스에 공지가 수정됨
	When 인사이트 홈에 진입하면
	Then 오늘 할 일 영역에서 변경된 공지를 확인 할 수 있다.

Scenario: 마감일이 지나지 않은 공지/과제가 삭제되면, 할 일에서 공지/과제를 확인할 수 없어야 한다.
	Given 마감일이 지나지 않은 공지/과제가 있음
	And 자녀가 가입한 클래스에서 공지/과제를 삭제함
	When 인사이트 홈에 진입하면
	Then 오늘 할 일에서 삭제된 공지/과제를 확인할 수 없어야 한다.
```

### 마치며

1부에서는 인수 테스트가 무엇인 지에 대한 이야기를 했고, 2부에서는 인수 테스트가 작성되는 일련의 과정을 소개했습니다.
이 글을 읽는 사람들이 인수 테스트를 단순히 회사의 프로세스로써 작성하는 것이 아니라 인수 테스트 작성의 의미와 각 과정에서의 의의를 알아가는데 도움이 되었으면 좋겠다는 바람으로 글을 마치겠습니다. 감사합니다. 🙂

참고: [린 애자일 기법을 활용한 테스트 주도 개발](http://www.yes24.com/Product/Goods/13161818)
